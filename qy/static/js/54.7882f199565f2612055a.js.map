{"version":3,"sources":["webpack:///./src/views/index/baiduVerify.vue","webpack:///./src/views/index/baiduVerify.vue?0237","webpack:///./src/views/index/baiduVerify.vue?3a31"],"names":["index_baiduVerify","computed","mapState","wxOpenId","state","mutations","userInfo","data","sessionCodeDisplay","resultDisplay","sessionCode","sessionList","videoSrc","videoNum","resultMessage","verifyMessage","verifyCode","score","create","identify","matchMessage","matchScore","imgSrc","loadingDisplay","mounted","console","info","$","addClass","document","body","clientWidth","methods","getSessioncode","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","split","stop","imgChange","files","event","target","dataTransfer","length","file","size","confirm","that","video","reader","FileReader","readAsDataURL","onload","e","canvas","createElement","ctx","getContext","image","Image","quality","setAttribute","src","FPicUrl","height","width","log","ratio","Math","sqrt","drawImage","base64","toDataURL","strLength","fileLength","parseInt","toFixed","replace","formData1","FormData","append","axios","post","baseUrl2","headers","Content-Type","then","response","parseXML","firstChild","textContent","decodeURIComponent","JSON","parse","ReturnType","ReturnMsg","aa","vue","$vux","toast","text","catch","error","getMatch","_this2","_callee2","_context2","JDGetMatch","sent","views_index_baiduVerify","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","href","_v","_m","on","click","$event","_l","item","index","key","_s","id","type","accept","capture","change","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/54.7882f199565f2612055a.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { JDGetSessioncode,JDGetMatch } from '@/api/getData'\r\nimport { mapState } from 'vuex'\r\nimport $ from 'jquery'\r\nimport axios from '../../config/http'\r\nimport { baseUrl2 } from \"../../config/env\";\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsessionCodeDisplay: false,\r\n\t\t\tresultDisplay:false,\r\n\t\t\tsessionCode: \"666666\",\r\n\t\t\tsessionList: [],\r\n\t\t\tvideoSrc:\"\",\r\n\t\t\tvideoNum:\"\",\r\n\t\t\tresultMessage:\"\",\r\n\t\t\tverifyMessage:\"\",\r\n\t\t\tverifyCode:\"\",\r\n\t\t\tscore:0,\r\n\t\t\tcreate:0,\r\n\t\t\tidentify:0,\r\n\t\t\tmatchMessage:\"\",\r\n\t\t\tmatchScore:0,\r\n\t\t\timgSrc:\"//aip.bdstatic.com/faceliveness/dist/1523595724898/images/pic_default.png\",\r\n\t\t\tloadingDisplay:false\r\n\t\t};\r\n\t},\r\n  computed: {\r\n    ...mapState({\r\n      wxOpenId: state => state.mutations.wxOpenId,\r\n      userInfo: state => state.mutations.userInfo\r\n    })\r\n  },\r\n\tmounted() {\r\n\t// \theight: 100% !important;\r\n\t// margin: 0 !important;\r\n\t// font-size: 12px !important;\r\n\t// -webkit-font-smoothing: antialiased !important;\r\n\t// -moz-osx-font-smoothing: grayscale !important;\r\n\t// overflow: hidden !important;\r\n\t// font-family: tahoma, arial, Hiragino Sans GB, Microsoft YaHei, sans-serif !important;\r\n\t\tconsole.info(1);\r\n\t\t// $(\"html\").css('height','100%').css('margin','0').css('-webkit-font-smoothing','antialiased')\r\n\t\t// .css('-moz-osx-font-smoothing','grayscale').css('overflow','hidden').css('font-family','tahoma, arial, Hiragino Sans GB, Microsoft YaHei, sans-serif')\r\n\t\t// if(document.body.clientWidth<370){\r\n\t\t// \t$(\"html\").css('font-size','9px')\r\n\t\t// }else{\r\n\t\t// \t$(\"html\").css('font-size','12px')\r\n\t\t// }\r\n\t\t$(\"html\").addClass('body-bg')\r\n\t\tconsole.info(document.body.clientWidth)\r\n\t},\r\n\tmethods: {\r\n\t\tasync getSessioncode() {\r\n\t\t\t// let data= await JDGetSessioncode({})\r\n\t\t\t// this.sessionCode=data;\r\n\t\t\tthis.sessionCodeDisplay = true;\r\n\t\t\t\r\n\t\t\tthis.sessionList = this.sessionCode.split(\"\");\r\n\t\t\tconsole.info(this.sessionCode.split(\"\"), this.sessionList);\r\n\t\t},\r\n\t  imgChange() {\r\n\t\t\tthis.loadingDisplay=true\r\n\t\t\tconst files = event.target.files || event.dataTransfer.files\r\n\t\t\tif (files && files.length > 0) {\r\n\t\t\t\tlet file = files[0]\r\n\t\t\t\tconsole.info(file)\r\n\t\t\t\t// var obj = new FormData();\r\n\t\t\t\t// obj.append(\"video\",file);\r\n\t\t\t\t// obj.append(\"image\", \"wzh\");\r\n\t\t\t\t// var _this = this;\r\n\t\t\t\t// $.ajax({\r\n\t\t\t\t// \t\ttype: 'post',\r\n\t\t\t\t// \t\turl: 'http://192.168.101.233:9999/TransferService.asmx/GetMatch1',\r\n\t\t\t\t// \t\tdata: obj,\r\n\t\t\t\t// \t\tcache: false,\r\n\t\t\t\t// \t\tprocessData: false, // 不处理发送的数据，因为data值是Formdata对象，不需要对数据做处理\r\n\t\t\t\t// \t\tcontentType: false, // 不设置Content-type请求头\r\n\t\t\t\t// \t\tsuccess: function (res) {\r\n\t\t\t\t// \t\t\tvar arr=res.split(':');\r\n\t\t\t\t// \t\t\tif(arr[0]==\"ok\"){\r\n\t\t\t\t// \t\t\t\t_this.img=arr[1];\r\n\t\t\t\t// \t\t\t}else{\r\n\t\t\t\t// \t\t\t\talert(arr[1]);\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// });\r\n\t\t\t\t\r\n\t\t\t\t//this.getMatch1(formData);\r\n\r\n\t\t\t\tconsole.info(file.size/1024/1024+'MB')\r\n\t\t\t\tif (file.size > 20 * 1024 * 1024) {\r\n\t\t\t\t\t// 视频大于20MB\r\n\t\t\t\t\tconfirm('您录制的视频时间过大,请重新录制')\r\n\t\t\t  } else {\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tvar video = event.target.files[0]; //选择的文件\r\n\t\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\t\tvar rs = reader.readAsDataURL(video);\r\n\t\t\t\t\treader.onload = e => {\r\n\t\t\t\t\t\t//that.videoSrc = e.target.result;\r\n\t\t\t\t\t\t//that.videoNum =  e.target.result.split(\";base64,\"); //base64文件内容\r\n\t\t\t\t\t\t//console.log(\"videoNum\"+that.videoNum[1]);\r\n            //alert(\"videoNum\"+that.videoNum[1])\r\n\t\t\t\t\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\t\t\t\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\t\t\t\t\tvar image = new Image();\r\n\t\t\t\t\t\tvar quality = 1;\r\n\t\t\t\t\t\timage.setAttribute(\"crossOrigin\", \"Anonymous\");\r\n\t\t\t\t\t\timage.src = that.userInfo[0].FPicUrl;\r\n\t\t\t\t\t\timage.onload = function() {\r\n\t\t\t\t\t\t\tif (image.height * image.width <= 640000) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"像素小于等于64万\");\r\n\t\t\t\t\t\t\t\tcanvas.height = image.height;\r\n\t\t\t\t\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(\"大于64万像素\");\r\n\t\t\t\t\t\t\t\tlet ratio = Math.sqrt((image.height * image.width) / 640000);\r\n\t\t\t\t\t\t\t\tcanvas.height = image.height / ratio;\r\n\t\t\t\t\t\t\t\tcanvas.width = image.width / ratio;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\t\t\t//var ext = image.src.substring(image.src.lastIndexOf(\".\")+1).toLowerCase();\r\n\t\t\t\t\t\t\tvar base64 = canvas.toDataURL(\"image/jpeg\", quality);\r\n\r\n\t\t\t\t\t\t\tvar strLength = base64.length;\r\n\t\t\t\t\t\t\tvar fileLength = parseInt(strLength - (strLength / 8) * 2);\r\n\r\n\t\t\t\t\t\t\t// 由字节转换为KB\r\n\t\t\t\t\t\t\tvar size = \"\";\r\n\t\t\t\t\t\t\tsize = (fileLength / 1024).toFixed(2);\r\n\t\t\t\t\t\t\twhile (parseInt(size) > 200) {\r\n\t\t\t\t\t\t\t\tquality = 0.99 * quality;\r\n\t\t\t\t\t\t\t\tbase64 = canvas.toDataURL(\"image/jpeg\", quality);\r\n\t\t\t\t\t\t\t\tstrLength = base64.length;\r\n\t\t\t\t\t\t\t\tfileLength = parseInt(strLength - (strLength / 8) * 2);\r\n\r\n\t\t\t\t\t\t\t\tsize = (fileLength / 1024).toFixed(2);\r\n\t\t\t\t\t\t\t}\r\n              //console.info(that.videoNum[1]),\r\n\t\t\t\t\t\t\tconsole.info(base64.replace(/.*;base64,/, \"\"))\r\n\r\n\t\t\t\t\t\t\tvar formData1 = new FormData();\r\n\t\t\t\t\t\t\tformData1.append(\"video\", file); \r\n\t\t\t\t\t\t\tformData1.append(\"image\", base64.replace(/.*;base64,/, \"\")); \r\n\t\t\t\t\t\t\tlet config = {\r\n\t\t\t\t\t\t\t\t//添加请求头\r\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"multipart/form-data\" }\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\taxios.post(baseUrl2+'/TransferService.asmx/GetMatch1', formData1, config).then(\r\n\t\t\t\t\t\t\tfunction (response){ \r\n\t\t\t\t\t\t\t\tthat.loadingDisplay=false\r\n\t\t\t\t\t\t\t\tresponse = $.parseXML(response.data).firstChild.textContent;\r\n\t\t\t\t\t\t\t\tresponse = decodeURIComponent(response);\r\n\t\t\t\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t\t\t\t\tif (response.ReturnType === \"success\" || response.ReturnType === \"S\") {\r\n\t\t\t\t\t\t\t\t\tthat.resultMessage = response.ReturnMsg;\r\n\t\t\t\t\t\t\t\t\tlet data=response.ReturnMsg;\r\n\t\t\t\t\t\t\t\t\tif(data[\"verify\"][\"error_code\"]===0){\r\n\t\t\t\t\t\t\t\t\t\tthat.verifyMessage=\"成功\"\r\n\t\t\t\t\t\t\t\t\t\tthat.score=data[\"verify\"][\"result\"][\"score\"];\r\n\t\t\t\t\t\t\t\t\t\tif(data[\"verify\"][\"result\"][\"code\"]){\r\n\t\t\t\t\t\t\t\t\t\t\tthat.create=data[\"verify\"][\"result\"][\"code\"][\"create\"];\r\n\t\t\t\t\t\t\t\t\t\t\tthat.identify=data[\"verify\"][\"result\"][\"code\"][\"identify\"];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthat.imgSrc=\"data:image/png;base64,\"+data[\"verify\"][\"result\"][\"pic_list\"][0][\"pic\"];\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthat.verifyMessage=\"失败\";\r\n\t\t\t\t\t\t\t\t\t\tthat.verifyCode=aa();\r\n\t\t\t\t\t\t\t\t\t\tfunction aa(){\r\n\t\t\t\t\t\t\t\t\t\t\tswitch (data[\"verify\"][\"error_code\"]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcase 216501:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn \"没有找到人脸\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tcase 216434:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn \"活体检测失败\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tcase 216507:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn \"视频中有多张脸\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn \"服务器异常\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(data[\"match\"][\"error_code\"]===0){\r\n\t\t\t\t\t\t\t\t\t\tthat.matchMessage=\"成功\";\r\n\t\t\t\t\t\t\t\t\t\tthat.matchScore=data[\"match\"][\"result\"][\"score\"];\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthat.matchMessage=\"失败\";\r\n\t\t\t\t\t\t\t\t\t\tthat.matchScore=0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthat.resultDisplay=true;\r\n\t\t\t\t\t\t\t\t\tthat.sessionCodeDisplay=false;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvue.$vux.toast.text(response.ReturnMsg);\r\n\t\t\t\t\t\t\t\t\tconsole.log(response.ReturnMsg);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(response); \r\n\t\t\t\t\t\t\t}).catch(function (error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//that.getMatch(that.videoNum[1],base64.replace(/.*;base64,/, \"\"));\r\n\t\t\t\t\t\t\t//that.resultMessage={err_no:0,err_msg:'success',result:{score:0.984654366,thresholds:{\"frr_1e-4\":0.05,\"frr_1e-3\":0.3,\"frr_1e-2\":0.9},code:{\"create\":\"5789\",\"identify\":\"5789\"},pic_list:[{\"face_id\":5745745747,\"pic\":\"gsagaheryzxv...\"},{\"face_id\":5745745747,\"pic\":\"gsagaheryzxv...\"}]},\"timestamp\":1509611848,\"cached\":0,\"serverlogid\":\"2248375729\"}\r\n\t\t\t\t\t\t\t//that.resultMessage={\"error_code \":222203,\"error_msg \":\"image check fail \",\" log_id \":1368654478344827381,\" timestamp \":1567834482,\" cached \":0,\" result \":null}\r\n\t\t\t\t\t\t\tconsole.log(that.resultMessage);\t\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t// setTimeout(function aa() {\r\n\t\t\t\t\t\t// \tlet scale = 1;\r\n\t\t\t\t\t\t// \tvar canvas = document.createElement(\"canvas\");\r\n\t\t\t\t\t\t// \tlet video11 = document.getElementById(\"video\");\r\n\t\t\t\t\t\t// \tcanvas.width = video11.videoWidth * scale;\r\n\t\t\t\t\t\t// \tcanvas.height = video11.videoHeight * scale;\r\n\t\t\t\t\t\t// \tcanvas\r\n\t\t\t\t\t\t// \t\t.getContext(\"2d\")\r\n\t\t\t\t\t\t// \t\t.drawImage(video11, 0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t// \tvar img = document.createElement(\"img\");\r\n\t\t\t\t\t\t// \timg.src = canvas.toDataURL(\"image/png\");\r\n\t\t\t\t\t\t// \tconsole.info(img.src);\r\n\t\t\t\t\t\t// }, 2000);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getMatch(video,image){\r\n\t\t\t// let data= await JDGetMatch({\r\n\t\t\t// \tformData\r\n\t\t\t// })\r\n\t\t\t// alert(1)\r\n\r\n\r\n\t\t\tlet data= await JDGetMatch({\r\n\t\t\t\tvideo: video,\r\n\t\t\t\timage: image\r\n\t\t\t})\r\n\t\t\tthis.resultMessage=data;\r\n\t\t\tif(data[\"verify\"][\"error_code\"]===0){\r\n\t\t\t\tthis.verifyMessage=\"成功\"\r\n\t\t\t\tthis.score=data[\"verify\"][\"result\"][\"score\"];\r\n\t\t\t\tif(data[\"verify\"][\"result\"][\"code\"]){\r\n\t\t\t\t\tthis.create=data[\"verify\"][\"result\"][\"code\"][\"create\"];\r\n\t\t\t\t\tthis.identify=data[\"verify\"][\"result\"][\"code\"][\"identify\"];\r\n\t\t\t\t}\r\n\t\t\t\tthis.imgSrc=\"data:image/png;base64,\"+data[\"verify\"][\"result\"][\"pic_list\"][0][\"pic\"];\r\n\t\t\t}else{\r\n\t\t\t\tthis.verifyMessage=\"失败\";\r\n\t\t\t\tthis.verifyCode=aa();\r\n\t\t\t\tfunction aa(){\r\n\t\t\t\t\tswitch (data[\"verify\"][\"error_code\"]) {\r\n\t\t\t\t\t\tcase 216501:\r\n\t\t\t\t\t\t\treturn \"没有找到人脸\";\r\n\t\t\t\t\t\tcase 216434:\r\n\t\t\t\t\t\t\treturn \"活体检测失败\";\r\n\t\t\t\t\t\tcase 216507:\r\n\t\t\t\t\t\t\treturn \"视频中有多张脸\";\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn \"服务器异常\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif(data[\"match\"][\"error_code\"]===0){\r\n\t\t\t\tthis.matchMessage=\"成功\";\r\n\t\t\t\tthis.matchScore=data[\"match\"][\"result\"][\"score\"];\r\n\t\t\t}else{\r\n\t\t\t\tthis.matchMessage=\"失败\";\r\n\t\t\t\tthis.matchScore=0;\r\n\t\t\t}\r\n\t\t\tthis.resultDisplay=true;\r\n\t\t\tthis.sessionCodeDisplay=false;\r\n\t\t}\r\n\t}\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/index/baiduVerify.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"body-bg\"},[_c('a',{attrs:{\"href\":\"https://ai.baidu.com/face-verify/mobile.html\"}},[_vm._v(\"链接\")]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"prompt\"},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"prompt-next\",on:{\"click\":function($event){return _vm.getSessioncode()}}},[_vm._v(\"下一步\")])]),_vm._v(\" \"),(_vm.sessionCodeDisplay)?_c('div',{staticClass:\"modal-layer\"},[_c('div',{staticClass:\"modal-layer-mask\"}),_vm._v(\" \"),_c('div',{staticClass:\"modal-layer-popup\"},[_c('div',{staticClass:\"modal-layer-success\"},[_c('div',{staticClass:\"modal-layer-popup-title\"},[_vm._v(\"请牢记以下验证码\")]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"modal-layer-popup-number\"},_vm._l((_vm.sessionList),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item))])}),0),_vm._v(\" \"),_c('div',{staticClass:\"modal-wrapper modal-point\"},[_c('span',{staticClass:\"modal-confirm-btn\"},[_vm._v(\"记住了，开始录制\")]),_vm._v(\" \"),_c('form',{attrs:{\"id\":\"myform\"}},[_c('input',{staticClass:\"camera-input\",attrs:{\"type\":\"file\",\"accept\":\"video/*\",\"capture\":\"user\"},on:{\"change\":_vm.imgChange}})])])]),_vm._v(\" \"),_c('span',{staticClass:\"modal-layer-close\",on:{\"click\":function($event){_vm.sessionCodeDisplay=false}}})])]):_vm._e(),_vm._v(\" \"),(_vm.resultDisplay)?_c('div',{staticClass:\"result\"},[_c('div',{staticClass:\"result-box\"},[_c('span',{staticClass:\"result-box-pic\"},[_c('span',{staticClass:\"result-box-pic-icon icon-top\"}),_vm._v(\" \"),_c('span',{staticClass:\"result-box-pic-icon icon-right\"}),_vm._v(\" \"),_c('span',{staticClass:\"result-box-pic-icon icon-bottom\"}),_vm._v(\" \"),_c('span',{staticClass:\"result-box-pic-icon icon-left\"}),_vm._v(\" \"),_c('img',{staticClass:\"result-box-return-img\",attrs:{\"src\":_vm.imgSrc}})]),_vm._v(\" \"),_c('span',{staticClass:\"result-box-text\"},[_c('div',[_vm._v(\"活体检测\\n\\t\\t\\t\\t\\t\"),_c('span',{staticClass:\"result-box-color resulr-color-red\"},[_vm._v(_vm._s(_vm.verifyMessage))]),_vm._v(\" \"),_c('span',{staticClass:\"result-box-failcolor\"},[_vm._v(_vm._s(_vm.verifyCode))])]),_vm._v(\" \"),_c('div',[_vm._v(\"图象对比\\n\\t\\t\\t\\t\\t\"),_c('span',{staticClass:\"result-box-color resulr-color-red\"},[_vm._v(_vm._s(_vm.matchMessage))])])]),_vm._v(\" \"),_c('div',{staticClass:\"result-box-value\"},[_c('span',{staticClass:\"result-box-value-text\"},[_vm._v(\"检测分值:\"+_vm._s(_vm.score))]),_vm._v(\" \"),_c('span',{staticClass:\"result-box-value-text\"},[_vm._v(\"应读数字:\"+_vm._s(_vm.create))]),_vm._v(\" \"),_c('span',{staticClass:\"result-box-value-text\"},[_vm._v(\"检测数字:\"+_vm._s(_vm.identify))]),_vm._v(\" \"),_c('span',{staticClass:\"result-box-value-text\"},[_vm._v(\"对比分值:\"+_vm._s(_vm.matchScore))])])]),_vm._v(\" \"),_c('div',{staticClass:\"result-option\"},[_c('span',{staticClass:\"result-option-btn result-option-btn-ok\"},[_vm._v(\"完成\")]),_vm._v(\" \"),_c('span',{staticClass:\"result-option-btn result-option-btn-again\",on:{\"click\":function($event){_vm.resultDisplay=false,_vm.sessionCodeDisplay=true}}},[_vm._v(\"重拍\")])])]):_vm._e(),_vm._v(\" \"),(_vm.loadingDisplay)?_c('div',{staticClass:\"loading\"},[_c('div',{staticClass:\"loading-icon\"},[_vm._v(\"验证中...\")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sketch\"},[_c('div',{staticClass:\"sketch-img\"}),_vm._v(\" \"),_c('p',{staticClass:\"sketch-text\"},[_vm._v(\"\\n\\t\\t\\t正面平视手机、保证光线充足\\n\\t\\t\\t\"),_c('br'),_vm._v(\"请勿遮挡面部\\n\\t\\t\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"prompt-box\"},[_c('div',{staticClass:\"prompt-box-text\"},[_c('span',{staticClass:\"prompt-box-text-number\"},[_vm._v(\"1\")]),_vm._v(\" \"),_c('span',{staticClass:\"prompt-box-text-content\"},[_vm._v(\"牢记验证码，点击开始录制\")]),_vm._v(\" \"),_c('span',{staticClass:\"prompt-box-text-border\"})]),_vm._v(\" \"),_c('div',{staticClass:\"prompt-box-text\"},[_c('span',{staticClass:\"prompt-box-text-number\"},[_vm._v(\"2\")]),_vm._v(\" \"),_c('span',{staticClass:\"prompt-box-text-content\"},[_vm._v(\"开启前置摄像头，用普通话朗读数字\")]),_vm._v(\" \"),_c('span',{staticClass:\"prompt-box-text-border\"})]),_vm._v(\" \"),_c('div',{staticClass:\"prompt-box-text\"},[_c('span',{staticClass:\"prompt-box-text-number\"},[_vm._v(\"3\")]),_vm._v(\" \"),_c('span',{staticClass:\"prompt-box-text-content\"},[_vm._v(\"完成录制，等待验证结果\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-layer-popup-content\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t此验证码将于\\n\\t\\t\\t\\t\\t\"),_c('span',[_vm._v(\"60\")]),_vm._v(\"秒后过期\\n\\t\\t\\t\\t\\t\"),_c('br'),_vm._v(\"用普通话朗读数字，视频时长\\n\\t\\t\\t\\t\\t\"),_c('span',[_vm._v(\"3-8\")]),_vm._v(\"秒最佳\\n\\t\\t\\t\\t\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-270a642e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/index/baiduVerify.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-270a642e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./baiduVerify.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./baiduVerify.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./baiduVerify.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-270a642e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./baiduVerify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/index/baiduVerify.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}