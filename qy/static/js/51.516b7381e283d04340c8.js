webpackJsonp([51],{"05c8":function(t,e){},U5Vf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),s=i.n(a),n=i("exGp"),o=i.n(n),c=i("7t+N"),r=i.n(c),l=i("1h8J"),d={data:function(){return{goalWidth:null,goalHeight:null,r:0,storeImg:new Image,aa:[{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"王五"},{id:2,name:"赵六"}],aVideo:"",aCanvas:"",ctx:""}},mounted:function(){this.get();var t=this.aa.find(function(t){return"2"==t.id});console.info(t);var e=this.aa.filter(function(t){return"2"==t.id});console.info(e)},methods:{openImgFile:function(){var t=r()("#file-input");t&&t.click()},fileChange:function(t){var e=r()("#file-input"),i=new FormData,a=e[0].files[0],s=this.drawImage,n=new Image;if(a){i.append("image",a);var o=new FileReader;o.readAsDataURL(a),o.onload=function(t){n.src=t.target.result,n.onload=function(){n.width,n.height,s(n.width,n.height,n),console.log(n)}}}},drawImage:function(t,e,i){var a=document.getElementById("myCanvas"),s=0,n=0;a.getContext&&(t==this.goalWidth&&e==this.goalHeight||e>this.goalHeight&&t>this.goalWidth&&(this.r=t/this.goalWidth,e/this.r<this.goalHeight&&(this.r=e/this.goalHeight),s=Math.ceil(t/this.r),n=Math.ceil(e/this.r),this.resizeImage(s,n,i)),a.width=this.goalWidth,a.height=this.goalHeight,a.getContext("2d").drawImage(i,0,0,a.width,a.height),document.getElementById("downloadImg").href=a.toDataURL("image/jpg"))},resizeImage:function(t,e,i){var a=document.getElementById("myCanvas");a.width=t,a.height=e,a.getContext("2d").drawImage(i,0,0,a.width,a.height),this.storeImg.src=a.toDataURL("image/jpg")},againDraw:function(){this.fileChange()},sys_click:function(){var t=this;return o()(s.a.mark(function e(){var i,a,n,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={url:location.href.split("#")[0]},a=t,e.next=4,Object(l._6)(i);case 4:n=e.sent,o=JSON.parse(n),console.log("jsondata",o),wx.config({beta:!0,debug:!0,appId:o.appid,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:["checkJsApi","scanQRCode","onMenuShareAppMessage","chooseImage","startRecord","startWifi","connectWifi","getWifiList","onGetWifiList","openBluetoothAdapter","setClipboardData","getNetworkType"]}),wx.error(function(t){alert("出错了："+t.errMsg)}),wx.ready(function(){wx.checkJsApi({jsApiList:["scanQRCode"],success:function(t){}}),wx.scanQRCode({needResult:1,scanType:["qrCode"],success:function(t){var e=t.resultStr;if(void 0!=JSON.parse(e)){alert("扫描结果："+e),alert(JSON.parse(e)),alert(JSON.parse(e).BarCodeType),alert(JSON.parse(e).BillNO);var i=a.getInspectionDetail(JSON.parse(e).BarCodeType,JSON.parse(e).BillNO);this.Json=[];for(var s=0;s<i.length;s++)this.Json.push(i[s])}}})});case 10:case"end":return e.stop()}},e,t)}))()},menuShareAppMessage_click:function(){wx.ready(function(){wx.onMenuShareAppMessage({title:"分享标题",desc:"分享描述",link:"http://work.goldemperor.com",imgUrl:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569746815939&di=f6c417385035c77cd0fdc8e0fc59a149&imgtype=0&src=http%3A%2F%2Fh.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F7af40ad162d9f2d3304da51ba2ec8a136227cce2.jpg",success:function(){console.log("成功")},cancel:function(){console.log("失败")}})})},chooseImage_click:function(){wx.ready(function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],defaultCameraMode:"batch",isSaveToAlbum:1,success:function(t){t.localIds}})})},startRecord_click:function(){wx.ready(function(){wx.startRecord()})},startWifi_click:function(){wx.ready(function(){wx.startWifi({success:function(t){console.log(t.errMsg)}})})},connectWifi_click:function(){wx.ready(function(){wx.connectWifi({SSID:"12348",BSSID:"8a:25:93:1c:16:c4",password:"88889999",success:function(t){console.log(t.errMsg)}})})},getWifiList_click:function(){wx.ready(function(){wx.getWifiList({success:function(t){console.log(t.errMsg)}})})},onGetWifiList_click:function(){wx.ready(function(){wx.onGetWifiList(function(t){if(t.wifiList.length)for(var e=0;e<t.wifiList.length;e++)console.log("=====wifiList======"),console.log("SSID:"+t.wifiList[e].SSID),console.log("BSSID:"+t.wifiList[e].BSSID),console.log("secure:"+t.wifiList[e].secure),console.log("secure:"+t.wifiList[e].signalStrength),console.log("====================")})})},openBluetoothAdapter_click:function(){var t=this;return o()(s.a.mark(function e(){var i,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={url:location.href.split("#")[0]},t,e.next=4,Object(l._6)(i);case 4:a=e.sent,n=JSON.parse(a),console.log("jsondata",n),wx.config({beta:!0,debug:!0,appId:n.appid,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["checkJsApi","scanQRCode","onMenuShareAppMessage","chooseImage"]}),wx.error(function(t){alert("出错了："+t.errMsg)}),wx.ready(function(){wx.openBluetoothAdapter({success:function(t){console.log("成功"+t)},fail:function(t){console.log("失败"+t)}})});case 10:case"end":return e.stop()}},e,t)}))()},setClipboardData_click:function(){wx.ready(function(){wx.setClipboardData({data:"data",success:function(t){console.log(t.errMsg)}})})},getNetworkType_click:function(){wx.ready(function(){wx.getNetworkType({success:function(t){var e=t.networkType;console.log(e)}})})},callCamera:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.$refs.video.srcObject=e,t.$refs.video.play()}).catch(function(t){console.error("摄像头开启失败，请检查摄像头是否可用！")})},photograph:function(){this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0,640,480);var t=this.$refs.canvas.toDataURL("image/jpeg",.7).replace("data:image/jpeg;base64,","").length,e=(parseInt(t-t/8*2)/1024).toFixed(2);console.log(e);var i=document.createElement("a");i.href=this.headImgSrc,i.download=(new Date).getTime()+".jpeg",i.click()},closeCamera:function(){this.$refs.video.srcObject&&(this.$refs.video.srcObject.getTracks().forEach(function(t){t.stop()}),this.$refs.video.srcObject=null)}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-4"},[i("h5",[t._v("组件：Canvas 实现 HTML 转图片")]),t._v(" "),t._m(0),t._v(" "),i("h5",[t._v("参考链接")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"#goal-width"}},[t._v("目标宽度")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.goalWidth,expression:"goalWidth"}],staticClass:"form-control",attrs:{id:"goal-width",type:"text"},domProps:{value:t.goalWidth},on:{input:function(e){e.target.composing||(t.goalWidth=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"#goal-heigth"}},[t._v("目标高度")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.goalHeight,expression:"goalHeight"}],staticClass:"form-control",attrs:{id:"goal-height",type:"text"},domProps:{value:t.goalHeight},on:{input:function(e){e.target.composing||(t.goalHeight=e.target.value)}}})]),t._v(" "),i("div",[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file-input",name:"",value:""},on:{change:t.fileChange}}),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.openImgFile}},[t._v("选择文件")]),t._v(" "),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.againDraw}},[t._v("重新绘制图片")]),t._v(" "),i("a",{staticClass:"btn btn-success",attrs:{download:"",id:"downloadImg"}},[t._v("下载图片")])])]),t._v(" "),t._m(4),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{id:"wxsys",type:"primary"},on:{click:t.sys_click}},[t._v("扫一扫")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.menuShareAppMessage_click}},[t._v("分享")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.chooseImage_click}},[t._v("选取图片")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.startRecord_click}},[t._v("开始音频")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.startWifi_click}},[t._v("开启wifi")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.connectWifi_click}},[t._v("连接wifi")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.getWifiList_click}},[t._v("获取wifi信息1")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.onGetWifiList_click}},[t._v("获取wifi信息2")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.openBluetoothAdapter_click}},[t._v("蓝牙")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.setClipboardData_click}},[t._v("剪贴板")])]),t._v(" "),i("div",{staticClass:"login_div"},[i("button",{attrs:{type:"primary"},on:{click:t.getNetworkType_click}},[t._v("网络状态")])]),t._v(" "),i("div",[i("img",{attrs:{src:t.headImgSrc,alt:"摄像头"},on:{click:t.callCamera}}),t._v(" "),i("canvas",{ref:"canvas",attrs:{width:"640",height:"480"}}),t._v(" "),i("video",{ref:"video",attrs:{width:"640",height:"480",autoplay:""}}),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.photograph}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("上传图片")]),this._v(" "),e("li",[this._v("根据目标宽度，高度，居中剪裁")]),this._v(" "),e("li",[this._v("保存下载图片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{href:"https://blog.csdn.net/fengshizty/article/details/25790397",target:"_blank"}},[this._v("Html5新特性 canvas画板画直线和等比缩放居中裁剪图片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{href:"https://blog.csdn.net/UW63ZqpKxwlRL1/article/details/79251311",target:"_blank"}},[this._v("实战：图片上传组件开发")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{href:"https://juejin.im/post/5b8409b451882543094b30c2#heading-3",target:"_blank"}},[this._v("纯前端 Canvas 实现 HTML 转图片，自动生成微信阅读卡片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-8"},[e("h5",[this._v("此处显示Canvas")]),this._v(" "),e("canvas",{staticStyle:{margin:"0 auto",display:"block"},attrs:{id:"myCanvas",width:"",height:""}})])}]};var u=i("VU/8")(d,g,!1,function(t){i("05c8")},null,null);e.default=u.exports}});
//# sourceMappingURL=51.516b7381e283d04340c8.js.map