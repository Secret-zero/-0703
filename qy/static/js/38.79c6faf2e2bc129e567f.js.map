{"version":3,"sources":["webpack:///./src/views/myWages/myWagesSignature.vue","webpack:///./src/views/myWages/myWagesSignature.vue?a657","webpack:///./src/views/myWages/myWagesSignature.vue?ccf1"],"names":["myWages_myWagesSignature","computed","mapState","userInfo1","state","mutations","userInfo","data","isSign","signSrc","mounted","document","querySelector","addEventListener","e","preventDefault","passive","this","lineCanvas","el","$refs","canvas","clearEl","clearCanvas","saveEl","saveCanvas","methods","obj","i","linewidth","color","background","createElement","appendChild","cxt","getContext","width","clientWidth","height","documentElement","clientHeight","body","fillStyle","fillRect","strokeStyle","lineWidth","lineCap","beginPath","moveTo","changedTouches","pageX","pageY","bind","lineTo","stroke","closePath","imgBase64","toDataURL","clearRect","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","console","info","JDSaveFaceRecognition","FEmpID","FitemID","FYear","$route","query","FMonth","FNumber","Fnumber","Base64","replace","sent","stop","views_myWages_myWagesSignature","render","_h","$createElement","_c","_self","ref","attrs","id","_v","directives","name","rawName","value","expression","staticClass","src","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/38.79c6faf2e2bc129e567f.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport $ from \"jquery\";\r\nimport { userInfo } from 'os';\r\nimport { mapState } from 'vuex'\r\nimport { JDSaveFaceRecognition } from \"@/api/getData\";\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisSign: false,\r\n\t\t\tsignSrc: \"\"\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n    ...mapState({\r\n      userInfo1: state => state.mutations.userInfo\r\n    })\r\n  },\r\n\tmounted() {\r\n\t\t/*去掉iphone手机滑动默认行为*/\r\n\t\t// $('body').on('touchmove', function (event) {\r\n\t\t// \t\tevent.preventDefault();\r\n\t\t// });\r\n\t\t// $(\"body\").bind(\"touchmove\",function(event){\r\n    //    event.preventDefault();\r\n\t\t// });\r\n\t\tdocument.querySelector('body').addEventListener('touchmove', function(e) {\r\n        e.preventDefault();\r\n\t\t},{passive:false})\r\n\t\tthis.lineCanvas({\r\n\t\t\tel: this.$refs.canvas, //绘制canvas的父级div\r\n\t\t\tclearEl: this.$refs.clearCanvas, //清除按钮\r\n\t\t\tsaveEl: this.$refs.saveCanvas //保存按钮\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tlineCanvas(obj) {\r\n\t\t\tthis.linewidth = 2;\r\n\t\t\tthis.color = \"#000000\";\r\n\t\t\tthis.background = \"#ffffff\";\r\n\t\t\tfor (var i in obj) {\r\n\t\t\t\tthis[i] = obj[i];\r\n\t\t\t}\r\n\t\t\tthis.canvas = document.createElement(\"canvas\");\r\n\t\t\tthis.el.appendChild(this.canvas);\r\n\t\t\tthis.cxt = this.canvas.getContext(\"2d\");\r\n\t\t\tthis.canvas.width = this.el.clientWidth;\r\n\t\t\tthis.canvas.height =  document.documentElement.clientHeight || document.body.clientHeight;//this.el.clientHeight;\r\n\t\t\tthis.cxt.fillStyle = this.background;\r\n\t\t\tthis.cxt.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\t\t\tthis.cxt.strokeStyle = this.color;\r\n\t\t\tthis.cxt.lineWidth = this.linewidth;\r\n\t\t\tthis.cxt.lineCap = \"round\";\r\n\t\t\t//开始绘制\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"touchstart\",\r\n\t\t\t\tfunction(e) {\r\n\t\t\t\t\tthis.cxt.beginPath();\r\n\t\t\t\t\tthis.cxt.moveTo(e.changedTouches[0].pageX, e.changedTouches[0].pageY);\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\t//绘制中\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"touchmove\",\r\n\t\t\t\tfunction(e) {\r\n\t\t\t\t\tthis.cxt.lineTo(e.changedTouches[0].pageX, e.changedTouches[0].pageY);\r\n\t\t\t\t\tthis.cxt.stroke();\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\t//结束绘制\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"touchend\",\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tthis.cxt.closePath();\r\n\t\t\t\t\tlet imgBase64 = this.canvas.toDataURL();\r\n\t\t\t\t\t//console.log(imgBase64);\r\n\t\t\t\t\tthis.signSrc = imgBase64;\r\n\t\t\t\t\t//TODO this.isSign = true;\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\t//清除画布\r\n\t\t\tthis.clearEl.addEventListener(\r\n\t\t\t\t\"click\",\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tthis.cxt.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\t//保存图片，直接转base64\r\n\t\t\tthis.saveEl.addEventListener(\r\n\t\t\t\t\"click\",\r\n\t\t\t\tasync function() {\r\n\t\t\t\t\tlet imgBase64 = this.canvas.toDataURL();\r\n\t\t\t\t\t//console.log(imgBase64);\r\n\t\t\t\t\tthis.signSrc = imgBase64;\r\n\t\t\t\t\t//TODO this.isSign = true;\r\n\t\t\t\t\tconsole.info(imgBase64)\r\n\t\t\t\t\tlet data = await JDSaveFaceRecognition({ \r\n\t\t\t\t\t\tFEmpID: this.userInfo1[0].FitemID,\r\n\t\t\t\t\t\tFYear: this.$route.query.FYear,\r\n\t\t\t\t\t\tFMonth: this.$route.query.FMonth,\r\n\t\t\t\t\t\tFNumber: this.userInfo1[0].Fnumber,\r\n\t\t\t\t\t\tBase64: this.signSrc.replace(/.*;base64,/, \"\")\r\n\t\t\t\t\t});\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t},\t\r\n\t\t// async getSaveFaceRecognition() {\r\n\t\t\t\t\r\n\t\t// \tlet data = await JDSaveFaceRecognition({ \r\n\t\t// \t\tFEmpID: this.userInfo1[0].FitemID,\r\n\t\t// \t\tFYear: this.$route.query.FYear,\r\n\t\t// \t\tFMonth: this.$route.query.FMonth,\r\n\t\t// \t\tFNumber: this.userInfo1[0].Fnumber,\r\n\t\t// \t\tBase64: this.signSrc.replace(/.*;base64,/, \"\")\r\n\t\t// \t});\r\n\t\t// \tthis.result = eval(data);\r\n\t\t// \tconsole.log(data);\r\n\t\t// }\r\n\t}\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/myWages/myWagesSignature.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"canvas\",attrs:{\"id\":\"canvas\"}},[_c('p',{ref:\"clearCanvas\",attrs:{\"id\":\"clearCanvas\"}},[_vm._v(\"清除\")]),_vm._v(\" \"),_c('p',{ref:\"saveCanvas\",attrs:{\"id\":\"saveCanvas\"}},[_vm._v(\"保存\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isSign),expression:\"isSign\"}],staticClass:\"mySign\"},[_c('img',{attrs:{\"src\":_vm.signSrc,\"alt\":\"\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b15f1272\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/myWages/myWagesSignature.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b15f1272\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./myWagesSignature.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./myWagesSignature.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./myWagesSignature.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b15f1272\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./myWagesSignature.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b15f1272\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/myWages/myWagesSignature.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}