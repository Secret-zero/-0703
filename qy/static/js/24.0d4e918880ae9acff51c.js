webpackJsonp([24],{"/CaZ":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_3_vux_src_components_x_button_index_vue__=__webpack_require__("2sLL"),__WEBPACK_IMPORTED_MODULE_4_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_5__api_getData__=__webpack_require__("1h8J"),__WEBPACK_IMPORTED_MODULE_6_jquery__=__webpack_require__("7t+N"),__WEBPACK_IMPORTED_MODULE_6_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_jquery__),_unused_webpack_default_export={data:function(){return{address:"",Punch:!0,recodeList:[],location:"",remark:""}},computed:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_4_vuex__.b)({wxOpenId:function(e){return e.mutations.wxOpenId},latlng:function(e){return e.mutations.latlng}})),components:{XButton:__WEBPACK_IMPORTED_MODULE_3_vux_src_components_x_button_index_vue__.a},created:function(){},watch:{latlng:function(e){function _(){return e.apply(this,arguments)}return _.toString=function(){return e.toString()},_}(function(){this.init(latlng.latitude,latlng.longitude)})},mounted:function(){var e=this,_=window.navigator.userAgent.toLowerCase();"micromessenger"==_.match(/MicroMessenger/i)&&"wxwork"==_.match(/wxwork/i)?(alert("企业微信客户端"),this.getSignature2(),setTimeout(function(){var _=e,t={success:function(e){_.init(e)}};e.$store.commit("updateLoadingStatus",{isLoading:!0}),e.getQYlocation(t)},2e3)):"micromessenger"==_.match(/micromessenger/i)&&(alert("微信客户端"),this.getSignature(),setTimeout(function(){var _=e,t={success:function(e){_.init(e)}};_.$store.commit("updateLoadingStatus",{isLoading:!0}),_.getLocation(t)},2e3))},methods:{getSignature2:function(e){var _=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(){var t,a;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:location.href.split("#")[0],type:1},e.next=3,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__._7)(t);case 3:a=e.sent,console.log("data",a),wx.config({beta:!0,debug:!0,appId:a.appid,timestamp:parseInt(a.timeStamp),nonceStr:a.nonceStr,signature:a.sig,jsApiList:["getLocation"]});case 6:case"end":return e.stop()}},e,_)}))()},getQYlocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wx.getLocation({type:"gcj02",success:function(_){console.log("success",_),e.success(_)},fail:function(e){console.log("error",e)}})},getLocationInfo:function(e){var _=52.35987755982988,t=e.longitude,a=e.latitude,n=Math.sqrt(t*t+a*a)+2e-5*Math.sin(a*_),r=Math.atan2(a,t)+3e-6*Math.cos(t*_),i=n*Math.cos(r)+.0065,o=n*Math.sin(r)+.006,s=new BMap.Point(i,o),c=this;(new BMap.Geocoder).getLocation(s,function(e){console.log("rs",e),c.address=e.address,c.$store.commit("updateLoadingStatus",{isLoading:!1})})},confirm:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _(){var t;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(_.prev=0,e.address){_.next=4;break}return e.$vux.toast.text("定位失败"),_.abrupt("return");case 4:return _.next=6,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__.c)({FWeixinOpenID:e.wxOpenId,zuobiao:e.location.lng+","+e.location.lat,address:e.address,beizhu:e.remark});case 6:t=_.sent,e.Punch=!1,e.getList(1),e.$vux.toast.text(t),_.next=14;break;case 12:_.prev=12,_.t0=_.catch(0);case 14:case"end":return _.stop()}},_,e,[[0,12]])}))()},init:function(e){var _=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function t(){var a,n,r,i,o,s,c;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_.getLocationInfo(e),a=new qq.maps.LatLng(e.latitude,e.longitude),_.map=new qq.maps.Map(document.getElementById("container"),{center:a,zoom:13}),n=new qq.maps.Marker({position:a,map:_.map}),r=new qq.maps.Point(0,39),i=new qq.maps.Size(42,68),o=new qq.maps.Point(0,0),s=new qq.maps.MarkerImage("https://3gimg.qq.com/lightmap/api_v2/2/4/99/theme/default/imgs/marker.png",i,o,r),n.setIcon(s),new qq.maps.InfoWindow({map:_.map}),c=_,_.geocoder=new qq.maps.Geocoder({complete:function(e){console.log("result",e),c.map.setCenter(e.detail.location);new qq.maps.Marker({map:c.map,position:e.detail.location})}});case 9:case"end":return t.stop()}},t,_)}))()},showErr:function(){this.$store.commit("updateLoadingStatus",{isLoading:!1})},getList:function getList(FType){var _this6=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4(){var data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_this6.recodeList=[],_this6.$store.commit("updateLoadingStatus",{isLoading:!0}),_context4.next=5,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__.i)({FWeixinOpenID:_this6.wxOpenId,FType:FType});case 5:data=_context4.sent,_this6.recodeList=eval(data),_this6.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log(data),_context4.next=14;break;case 11:_context4.prev=11,_context4.t0=_context4.catch(0),_this6.$store.commit("updateLoadingStatus",{isLoading:!1});case 14:case"end":return _context4.stop()}},_callee4,_this6,[[0,11]])}))()}}}},"80U7":function(e,_){},KmOi:function(e,_,t){"use strict";Object.defineProperty(_,"__esModule",{value:!0});t("/CaZ");var a=t("euaq"),n={render:function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"wrap",attrs:{id:"wrap"}},[t("div",[e._v(e._s(e.latlng.latitude)+", "+e._s(e.latlng.longitude))]),e._v(" "),t("div",{staticClass:"funList"},[t("ul",[t("li",{on:{click:function(_){e.getList(1),e.Punch=!1}}},[e._v("当月打卡记录")]),e._v(" "),t("li",{on:{click:function(_){e.getList(2),e.Punch=!1}}},[e._v("本年打卡记录")]),e._v(" "),t("li",{on:{click:function(_){e.Punch=!0}}},[e._v("开始打卡")])])]),e._v(" "),e.Punch?e._e():t("div",{staticClass:"punchList"},[t("ul",e._l(e.recodeList,function(_,a){return t("li",{key:a,staticClass:"mt20"},[t("div",{staticClass:"time"},[e._v("打卡时间："+e._s(_.addtime))]),e._v(" "),t("div",{staticClass:"place"},[e._v("打卡地点："+e._s(_.address))])])}),0)]),e._v(" "),e.Punch?t("div",{staticClass:"punchContent"},[t("div",{staticClass:"address mt20"},[t("div",{staticClass:"name"},[e._v("地址")]),e._v(" "),t("div",{staticClass:"addContent"},[e._v(e._s(e.address))])]),e._v(" "),t("div",{staticClass:"address mt20"},[t("div",{staticClass:"name"},[e._v("备注")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],attrs:{placeholder:"选填"},domProps:{value:e.remark},on:{input:function(_){_.target.composing||(e.remark=_.target.value)}}})])]):e._e(),e._v(" "),e.Punch?t("div",{staticClass:"button"},[t("x-button",{staticStyle:{width:"100%"},attrs:{gradients:["#d93309","#aa0000"]},nativeOn:{click:function(_){return e.confirm(_)}}},[e._v("提交打卡")])],1):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.Punch,expression:"Punch"}],staticClass:"map"},[t("div",{staticClass:"title"},[e._v("地图信息")]),e._v(" "),t("div",{staticStyle:{height:"400px"},attrs:{id:"container"}})]),e._v(" "),t("div",{attrs:{id:"allmap"}})])},staticRenderFns:[]};var r=function(e){t("80U7")},i=t("VU/8")(a.a,n,!1,r,"data-v-90d65284",null);_.default=i.exports},euaq:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_3_vux_src_components_x_button_index_vue__=__webpack_require__("2sLL"),__WEBPACK_IMPORTED_MODULE_4_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_5__api_getData__=__webpack_require__("1h8J"),__WEBPACK_IMPORTED_MODULE_6_jquery__=__webpack_require__("7t+N"),__WEBPACK_IMPORTED_MODULE_6_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_jquery__);__webpack_exports__.a={data:function(){return{address:"",Punch:!0,recodeList:[],location:"",remark:""}},computed:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_4_vuex__.b)({wxOpenId:function(e){return e.mutations.wxOpenId},latlng:function(e){return e.mutations.latlng}})),components:{XButton:__WEBPACK_IMPORTED_MODULE_3_vux_src_components_x_button_index_vue__.a},created:function(){},watch:{latlng:function(e){function _(){return e.apply(this,arguments)}return _.toString=function(){return e.toString()},_}(function(){this.init(latlng.latitude,latlng.longitude)})},mounted:function(){var e=this,_=window.navigator.userAgent.toLowerCase();"micromessenger"==_.match(/MicroMessenger/i)&&"wxwork"==_.match(/wxwork/i)?(alert("企业微信客户端"),this.getSignature2(),setTimeout(function(){var _=e,t={success:function(e){_.init(e)}};e.$store.commit("updateLoadingStatus",{isLoading:!0}),e.getQYlocation(t)},2e3)):"micromessenger"==_.match(/micromessenger/i)&&(alert("微信客户端"),this.getSignature(),setTimeout(function(){var _=e,t={success:function(e){_.init(e)}};_.$store.commit("updateLoadingStatus",{isLoading:!0}),_.getLocation(t)},2e3))},methods:{getSignature2:function(e){var _=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(){var t,a;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:location.href.split("#")[0],type:1},e.next=3,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__._7)(t);case 3:a=e.sent,console.log("data",a),wx.config({beta:!0,debug:!0,appId:a.appid,timestamp:parseInt(a.timeStamp),nonceStr:a.nonceStr,signature:a.sig,jsApiList:["getLocation"]});case 6:case"end":return e.stop()}},e,_)}))()},getQYlocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wx.getLocation({type:"gcj02",success:function(_){console.log("success",_),e.success(_)},fail:function(e){console.log("error",e)}})},getLocationInfo:function(e){var _=52.35987755982988,t=e.longitude,a=e.latitude,n=Math.sqrt(t*t+a*a)+2e-5*Math.sin(a*_),r=Math.atan2(a,t)+3e-6*Math.cos(t*_),i=n*Math.cos(r)+.0065,o=n*Math.sin(r)+.006,s=new BMap.Point(i,o),c=this;(new BMap.Geocoder).getLocation(s,function(e){console.log("rs",e),c.address=e.address,c.$store.commit("updateLoadingStatus",{isLoading:!1})})},confirm:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _(){var t;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(_.prev=0,e.address){_.next=4;break}return e.$vux.toast.text("定位失败"),_.abrupt("return");case 4:return _.next=6,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__.c)({FWeixinOpenID:e.wxOpenId,zuobiao:e.location.lng+","+e.location.lat,address:e.address,beizhu:e.remark});case 6:t=_.sent,e.Punch=!1,e.getList(1),e.$vux.toast.text(t),_.next=14;break;case 12:_.prev=12,_.t0=_.catch(0);case 14:case"end":return _.stop()}},_,e,[[0,12]])}))()},init:function(e){var _=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function t(){var a,n,r,i,o,s,c;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_.getLocationInfo(e),a=new qq.maps.LatLng(e.latitude,e.longitude),_.map=new qq.maps.Map(document.getElementById("container"),{center:a,zoom:13}),n=new qq.maps.Marker({position:a,map:_.map}),r=new qq.maps.Point(0,39),i=new qq.maps.Size(42,68),o=new qq.maps.Point(0,0),s=new qq.maps.MarkerImage("https://3gimg.qq.com/lightmap/api_v2/2/4/99/theme/default/imgs/marker.png",i,o,r),n.setIcon(s),new qq.maps.InfoWindow({map:_.map}),c=_,_.geocoder=new qq.maps.Geocoder({complete:function(e){console.log("result",e),c.map.setCenter(e.detail.location);new qq.maps.Marker({map:c.map,position:e.detail.location})}});case 9:case"end":return t.stop()}},t,_)}))()},showErr:function(){this.$store.commit("updateLoadingStatus",{isLoading:!1})},getList:function getList(FType){var _this6=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4(){var data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_this6.recodeList=[],_this6.$store.commit("updateLoadingStatus",{isLoading:!0}),_context4.next=5,Object(__WEBPACK_IMPORTED_MODULE_5__api_getData__.i)({FWeixinOpenID:_this6.wxOpenId,FType:FType});case 5:data=_context4.sent,_this6.recodeList=eval(data),_this6.$store.commit("updateLoadingStatus",{isLoading:!1}),console.log(data),_context4.next=14;break;case 11:_context4.prev=11,_context4.t0=_context4.catch(0),_this6.$store.commit("updateLoadingStatus",{isLoading:!1});case 14:case"end":return _context4.stop()}},_callee4,_this6,[[0,11]])}))()}}}}});
//# sourceMappingURL=24.0d4e918880ae9acff51c.js.map