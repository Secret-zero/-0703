webpackJsonp([38],{C7X0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),c=s.n(a),h=s("Dd8w"),r=s.n(h),o=(s("7t+N"),s("gAs1"),s("NYxO")),u=s("1h8J"),d=(r()({},Object(o.b)({userInfo1:function(t){return t.mutations.userInfo}})),{data:function(){return{isSign:!1,signSrc:""}},computed:r()({},Object(o.b)({userInfo1:function(t){return t.mutations.userInfo}})),mounted:function(){document.querySelector("body").addEventListener("touchmove",function(t){t.preventDefault()},{passive:!1}),this.lineCanvas({el:this.$refs.canvas,clearEl:this.$refs.clearCanvas,saveEl:this.$refs.saveCanvas})},methods:{lineCanvas:function(t){for(var e in this.linewidth=2,this.color="#000000",this.background="#ffffff",t)this[e]=t[e];this.canvas=document.createElement("canvas"),this.el.appendChild(this.canvas),this.cxt=this.canvas.getContext("2d"),this.canvas.width=this.el.clientWidth,this.canvas.height=document.documentElement.clientHeight||document.body.clientHeight,this.cxt.fillStyle=this.background,this.cxt.fillRect(0,0,this.canvas.width,this.canvas.height),this.cxt.strokeStyle=this.color,this.cxt.lineWidth=this.linewidth,this.cxt.lineCap="round",this.canvas.addEventListener("touchstart",function(t){this.cxt.beginPath(),this.cxt.moveTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY)}.bind(this),!1),this.canvas.addEventListener("touchmove",function(t){this.cxt.lineTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY),this.cxt.stroke()}.bind(this),!1),this.canvas.addEventListener("touchend",function(){this.cxt.closePath();var t=this.canvas.toDataURL();this.signSrc=t}.bind(this),!1),this.clearEl.addEventListener("click",function(){this.cxt.clearRect(0,0,this.canvas.width,this.canvas.height)}.bind(this),!1),this.saveEl.addEventListener("click",c()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.canvas.toDataURL(),this.signSrc=e,console.info(e),t.next=5,Object(u._2)({FEmpID:this.userInfo1[0].FitemID,FYear:this.$route.query.FYear,FMonth:this.$route.query.FMonth,FNumber:this.userInfo1[0].Fnumber,Base64:this.signSrc.replace(/.*;base64,/,"")});case 5:t.sent;case 6:case"end":return t.stop()}},t,this)})).bind(this),!1)}}}),v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"canvas",attrs:{id:"canvas"}},[e("p",{ref:"clearCanvas",attrs:{id:"clearCanvas"}},[this._v("清除")]),this._v(" "),e("p",{ref:"saveCanvas",attrs:{id:"saveCanvas"}},[this._v("保存")])]),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.isSign,expression:"isSign"}],staticClass:"mySign"},[e("img",{attrs:{src:this.signSrc,alt:""}})])])},staticRenderFns:[]};var l=s("VU/8")(d,v,!1,function(t){s("emj4")},"data-v-b15f1272",null);e.default=l.exports},emj4:function(t,e){}});
//# sourceMappingURL=38.79c6faf2e2bc129e567f.js.map